<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css">
        <style>
html, body {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
}

#movie {
  width: 100%;
}
        </style>
    </head>
    <body style="background-color:black;">
        <img id="movie" src="">

       	<script type="text/javascript">

          function getQueryParams(qs) {
            qs = qs.split('+').join(' ');
            var params = {};
            var tokens;
            var re = /[?&]?([^=]+)=([^&]*)/g;
            while (tokens = re.exec(qs)) {
                params[decodeURIComponent(tokens[1])] = decodeURIComponent(tokens[2]);
            }
            return params;
          }

       		var params = getQueryParams(document.location.search);

					var videoSource = params["src"];
					if (!videoSource) {
						videoSource = "http://www.streambox.fr/playlists/test_001/stream.m3u8";
					}
					console.log("Video source " + videoSource);

					var refreshTime = params["refresh"];

					if (!refreshTime) {
						refreshTime = 10000;
					}
					console.log("Refresh time " + refreshTime);

       		var video = document.getElementById("movie");

       		video.setAttribute('src', videoSource);

					setTimeout(function(){
						location.reload();
					}, refreshTime);

       	</script>

    </body>
</html>
